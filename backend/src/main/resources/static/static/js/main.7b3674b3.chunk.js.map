{"version":3,"sources":["components/Announcement.js","App.js","reportWebVitals.js","router/index.js","index.js"],"names":["Announcement","props","Form","useForm","form","className","src","onFinish","data","onClick","initialValues","title","content","Item","label","name","placeholder","htmlType","type","to","App","state","domain","corpId","authCode","userId","userName","showType","this","showPage","login","setState","e","pushAnnouncement","axios","post","then","res","catch","error","alert","JSON","stringify","get","loginAction","_this","dd","permission","requestAuthCode","onSuccess","code","success","message","info","setTimeout","onFail","err","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","history","createHashHistory","RouterConfig","path","exact","render","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.7b3674b3.chunk.js","sourcesContent":["import { Form, Input, Button } from \"antd\"\nimport React from \"react\"\nimport {NavLink} from 'react-router-dom'\nimport '../App.css'\nimport \"antd/dist/antd.min.css\"\n\nconst Announcement = (props) => {\n  const [form] = Form.useForm()\n  const initValue = {\n    title: \"公告标题\",\n    content: \"公告内容\",\n  }\n\n  const onSubmit = (data) => {\n    props.onClick(data)\n  }\n  return (\n      <div className=\"content\">\n          <div className=\"header\">\n              <img\n                  src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                  className=\"headImg\"\n              />\n              钉钉模板\n          </div>\n          <div className=\"App\">\n            <h4 className=\"title\">酷应用示例—推送公告到群</h4>\n            <Form form={form} onFinish={onSubmit} initialValues={initValue}>\n              <Form.Item label=\"公告标题\" name=\"title\">\n                <Input placeholder=\"请输入公告标题\" />\n              </Form.Item>\n              <Form.Item label=\"公告内容\" name=\"content\">\n                <Input placeholder=\"请输入公告内容\" />\n              </Form.Item>\n              <Button htmlType=\"submit\" type=\"primary\">\n                提交\n              </Button>\n            </Form>\n            <NavLink to='/App'>←应用首页</NavLink>\n          </div>\n      </div>\n  )\n}\n\nexport default Announcement\n","import axios from 'axios'\nimport React from 'react'\nimport './App.css'\nimport \"antd/dist/antd.min.css\"\nimport { Button, message, Input} from \"antd\"\nimport * as dd from \"dingtalk-jsapi\"\nimport Announcement from \"./components/Announcement\"\nimport {NavLink} from 'react-router-dom'\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            //内网穿透工具介绍:\n            // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n            domain: \"\",\n            corpId: '',\n            authCode: '',\n            userId: '',\n            userName: '',\n            showType: 0\n        }\n    }\n\n    render() {\n        this.showPage();\n        if (this.state.userId === '') {\n            // 免登操作\n            this.login();\n        }\n        return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                {this.state.showType === 0 && (\n                    <div>\n                        <h2>酷应用示例</h2>\n                        <p>\n                            <Button type=\"primary\">\n                                <NavLink to='/Announcement'>推送公告到群</NavLink>\n                            </Button>\n                        </p>\n                        <p>\n                            <Button type=\"primary\" onClick={() => this.setState({showType : 2})}>\n                                同步日程到群\n                            </Button>\n                        </p>\n                    </div>\n                )}\n                {this.state.showType === 1 && (\n                    <div>\n                        <Announcement\n                            onClick={(e) => this.pushAnnouncement(e)}\n                        />\n\n                    </div>\n                )}\n            </div>\n        </div>\n        );\n    }\n\n    backHome(){\n        this.setState({\n            showType : 0\n        })\n    }\n\n    writeAnnouncement(e){\n\n    }\n\n    pushAnnouncement(data){\n        const { title, content } = data\n        axios.post(this.state.domain + \"/biz/pushAnnouncement\", {\n            title:title,\n            content:content\n        }).then(res => {\n\n        }).catch(error => {\n            alert(\"pushAnnouncement err, \" + JSON.stringify(error))\n        })\n    }\n\n    syncSchedule(){\n        axios.post(this.state.domain + \"/biz/syncSchedule\")\n            .then(res => {\n\n            }).catch(error => {\n            alert(\"pushAnnouncement err, \" + JSON.stringify(error))\n        })\n    }\n\n    //登录-获取corpId\n    login() {\n        axios.get(this.state.domain + \"/getCorpId\")\n            .then(res => {\n                if (res.data) {\n                    this.loginAction(res.data);\n                }\n            }).catch(error => {\n            alert(\"corpId err, \" + JSON.stringify(error))\n        })\n    }\n\n    //登录操作\n    loginAction(corpId) {\n        // alert(\"corpId: \" +  corpId);\n        let _this = this;\n        dd.runtime.permission.requestAuthCode({\n            corpId: corpId,//企业 corpId\n            onSuccess: function (res) {\n                // 调用成功时回调\n                _this.state.authCode = res.code\n                axios.get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode\n                ).then(res => {\n                    if (res && res.data.success) {\n                        let userId = res.data.data.userId;\n                        let userName = res.data.data.userName;\n                        message.info('登录成功，你好' + userName);\n                        setTimeout(function () {\n                            _this.setState({\n                                userId: userId,\n                                userName: userName\n                            })\n                        }, 0)\n                    } else {\n                        alert(\"login failed --->\" + JSON.stringify(res));\n                    }\n                }).catch(error => {\n                    alert(\"httpRequest failed --->\" + JSON.stringify(error))\n                })\n            },\n            onFail: function (err) {\n                // 调用失败时回调\n                alert(\"requestAuthCode failed --->\" + JSON.stringify(err))\n            }\n        });\n    }\n\n    showPage(){\n        // document.getElementById(\"root\").addEventListener((ele)=>{\n        //     console.log(ele.target,'======')\n        // })\n        // let pageType = getUrlSearchParam(\"pageType\");\n        // if(pageType){\n        //     if(pageType !== this.state.showType){\n        //         this.setState({\n        //             showType : pageType\n        //         })\n        //     }\n        // }\n    }\n\n}\n\nfunction getUrlSearchParam(key) {\n    var search = window.location.search\n    var arr = !search ? [] : search.substr(1).split(\"&\")\n    var param = {}\n    for (var i = 0, l = arr.length; i < l; i++) {\n        var kv = arr[i].split(\"=\")\n        param[kv[0]] = kv[1]\n    }\n    return key ? param[key] || \"\" : param\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Announcement from '../components/Announcement';\nimport App from '../App';\nimport React from 'react';\nimport {Router,Route,Switch,Redirect} from 'react-router-dom';\nimport { createHashHistory } from \"history\";\nconst history = createHashHistory();\n\nclass RouterConfig extends React.Component{\n    render(){\n        return(\n            <Router history={history}>\n                <Switch>\n                    <Route path='/' exact render={()=>(\n                        <Redirect to='/App'/>\n                    )}/>\n                    <Route path='/App' component={App}/>\n                    <Route path='/Announcement' component={Announcement}/>\n                </Switch>\n            </Router>\n        )\n    }\n}\nexport default RouterConfig;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport RouterConfig from './router/index.js';\n\nReactDOM.render(\n    <RouterConfig/>, document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}