(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{161:function(e,t,n){},321:function(e,t,n){},670:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(35),s=n.n(i),r=(n(321),n(33)),o=n.n(r),l=n(52),d=n(12),j=n(13),u=n(15),h=n(16),p=n(63),b=n.n(p),m=(n(161),n(162),n(674)),O=n(242),g=n(676),x=n(244),f=n(102),v=n(76),y=n(10),I=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(d.a)(this,n),(c=t.call(this,e)).state={domain:"",corpId:"",authCode:"",userId:"",userName:"",showType:0,log:[]},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;setInterval(Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b.a.get(e.state.domain+"/getLog").then((function(t){if(t.data){var n=t.data;e.setState({log:n})}})).catch((function(e){alert("getLog err, "+JSON.stringify(e))}));case 1:case"end":return t.stop()}}),t)}))),5e3)}},{key:"constructorContentStyle",value:function(e){return{height:"160px",color:"#fff",lineHeight:"160px",textAlign:"center",background:"#364d79",backgroundImage:"url("+e+")"}}},{key:"render",value:function(){return""===this.state.userId&&this.login(),Object(y.jsxs)("div",{className:"content",children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png",className:"headImg"}),"\u9489\u9489\u6a21\u677f"]}),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("h2",{children:"\u9177\u5e94\u7528\u914d\u7f6e"}),Object(y.jsx)("p",{children:"\u4f53\u9a8c\u6b64\u5e94\u7528\u9700\u8981\u505a\u5982\u4e0b\u914d\u7f6e\uff0c\u53c2\u8003\u6587\u6863\uff1ahttps://open.dingtalk.com/document/org/group-application"}),Object(y.jsxs)(m.a,{autoplay:!0,children:[Object(y.jsx)("div",{children:Object(y.jsx)("p",{style:{height:"160px",color:"red",lineHeight:"160px",textAlign:"center",background:"#364d79",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundImage:"url(https://img.alicdn.com/imgextra/i2/O1CN01MG0GBf1fbxJHpo96o_!!6000000004026-2-tps-988-593.png)"},children:"\u7b2c\u4e00\u6b65\uff1a\u914d\u7f6e\u673a\u5668\u4eba"})}),Object(y.jsx)("div",{children:Object(y.jsx)("p",{style:{height:"160px",color:"red",lineHeight:"160px",textAlign:"center",background:"#364d79",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundImage:"url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)"},children:"\u7b2c\u4e8c\u6b65\uff1a\u5f00\u542f\u914d\u7f6e\u5e94\u7528\u6269\u5c55"})}),Object(y.jsx)("div",{children:Object(y.jsx)("p",{style:{height:"160px",color:"red",lineHeight:"160px",textAlign:"center",background:"#364d79",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundImage:"url(https://img.alicdn.com/imgextra/i3/O1CN01Lz3wjC1aFRlgZo0fW_!!6000000003300-2-tps-1005-536.png)"},children:"\u7b2c\u4e09\u6b65\uff1a\u914d\u7f6e\u7fa4\u5165\u53e3"})}),Object(y.jsx)("div",{children:Object(y.jsx)("p",{style:{height:"160px",color:"red",lineHeight:"160px",textAlign:"center",background:"#364d79",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundImage:"url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)"},children:"\u7b2c\u56db\u6b65\uff1a\u70b9\u51fb\u6309\u94ae\u53d1\u5e03\u5230\u7fa4"})})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"\u9177\u5e94\u7528\u793a\u4f8b"}),Object(y.jsx)("p",{children:Object(y.jsx)(O.a,{type:"primary",children:Object(y.jsx)(v.a,{to:"/Announcement",children:"\u63a8\u9001\u516c\u544a\u5230\u7fa4"})})}),Object(y.jsx)("p",{children:Object(y.jsx)(O.a,{type:"primary",children:Object(y.jsx)(v.a,{to:"/Schedule",children:"\u540c\u6b65\u65e5\u7a0b\u5230\u7fa4"})})})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"\u9177\u5e94\u7528\u52a8\u4f5c"}),Object(y.jsx)("p",{children:this.state.log.length>0&&Object(y.jsx)("div",{children:Object(y.jsx)(g.a,{children:this.state.log.map((function(e,t){return Object(y.jsx)(g.a.Item,{children:e},t)}))})})})]})]})]})}},{key:"login",value:function(){var e=this;b.a.get(this.state.domain+"/getCorpId").then((function(t){t.data&&e.loginAction(t.data)})).catch((function(e){alert("corpId err, "+JSON.stringify(e))}))}},{key:"loginAction",value:function(e){var t=this;f.runtime.permission.requestAuthCode({corpId:e,onSuccess:function(e){t.state.authCode=e.code,b.a.get(t.state.domain+"/login?authCode="+t.state.authCode).then((function(e){if(e&&e.data.success){var n=e.data.data.userId,c=e.data.data.userName;x.b.info("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d"+c),setTimeout((function(){t.setState({userId:n,userName:c})}),0)}else alert("login failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))},onFail:function(e){alert("requestAuthCode failed ---\x3e"+JSON.stringify(e))}})}}]),n}(a.a.Component),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,677)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))},N=n(4),C=n(675),k=n(671),w=n(673),A=n(672),D=function(e){var t=C.a.Option,n=k.a.useForm(),a=Object(N.a)(n,1)[0],i=Object(c.useState)(""),s=Object(N.a)(i,2),r=s[0],o=s[1],l=Object(c.useState)(""),d=Object(N.a)(l,2),j=d[0],u=d[1],h=Object(c.useState)([]),p=Object(N.a)(h,2),m=p[0],g=p[1],x=Object(c.useState)("https://img.alicdn.com/imgextra/i2/O1CN01RVPdut26Fxv9aZjvf_!!6000000007633-2-tps-220-324.png"),f=Object(N.a)(x,2),I=f[0],S=f[1],D=window.location.protocol+"//"+window.location.hostname,F={title:"\u516c\u544a",content:"\u5927\u5bb6\u6309\u7167\u8fd9\u4e2a\u683c\u5f0f\u586b\u5199\u4e0b\uff0c\u6bcf\u5468\u6211\u4f1a\u505a\u4e00\u4e2a\u7edf\u8ba1\u548c\u516c\u5e03\u54c8\uff0c\u548c\u5927\u5bb6\u540c\u6b65\u4e0b\u6211\u4eec\u7684\u8fdb\u5c55",imgArr:["https://img.alicdn.com/imgextra/i1/O1CN01AFoPW21aVw1gZfaoX_!!6000000003336-2-tps-220-324.png","https://img.alicdn.com/imgextra/i2/O1CN01RVPdut26Fxv9aZjvf_!!6000000007633-2-tps-220-324.png","https://img.alicdn.com/imgextra/i3/O1CN019wBXsv1wyG4CA2Tcm_!!6000000006376-2-tps-220-324.png","https://img.alicdn.com/imgextra/i2/O1CN01aL4qn21q0MZjXf9jS_!!6000000005433-2-tps-220-324.png"]};return Object(c.useEffect)((function(){var e=window.location.hash,t=!0;if(e){var n=e.indexOf("/"),c=e.substr(n+1),a=c.indexOf("/");if(a>0){var i=c.substr(a+1);o(i),t=!1}}t&&b.a.get("/getConversationIdMap").then((function(e){var t=e.data,n=[];Object.keys(t).map((function(e,c){var a={label:t[e],value:e};n.push(a)})),g(n)})).catch((function(e){alert("getConversationIdMap err, "+JSON.stringify(e))}))}),[]),Object(y.jsxs)("div",{className:"content",children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png",className:"headImg"}),"\u9489\u9489\u6a21\u677f"]}),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("h3",{className:"title",children:"\u9177\u5e94\u7528\u793a\u4f8b\u2014\u63a8\u9001\u516c\u544a\u5230\u7fa4"}),Object(y.jsxs)(k.a,{form:a,onFinish:function(e){e.cid=""!==r?r:j,e.img=I,e.domain=D,console.log("======= pushAnnouncement ======="),b.a.post("/biz/pushAnnouncement",e).then((function(e){})).catch((function(e){alert("pushAnnouncement err, "+JSON.stringify(e))}))},initialValues:F,children:[Object(y.jsx)(k.a.Item,{label:"\u516c\u544a\u6807\u9898",name:"title",children:Object(y.jsx)(w.a,{placeholder:"\u8bf7\u8f93\u5165\u516c\u544a\u6807\u9898"})}),Object(y.jsx)(k.a.Item,{label:"\u516c\u544a\u5185\u5bb9",name:"content",children:Object(y.jsx)(w.a,{placeholder:"\u8bf7\u8f93\u5165\u516c\u544a\u5185\u5bb9"})}),Object(y.jsxs)(k.a.Item,{label:"\u516c\u544a\u914d\u56fe",name:"img",children:[Object(y.jsxs)(C.a,{defaultValue:"1",onChange:function(e){var t=parseInt(e),n=F.imgArr[t];S(n)},children:[Object(y.jsx)(t,{value:"0",children:"\u56fe1"}),Object(y.jsx)(t,{value:"1",children:"\u56fe2"}),Object(y.jsx)(t,{value:"2",children:"\u56fe3"}),Object(y.jsx)(t,{value:"3",children:"\u56fe4"})]}),Object(y.jsx)("br",{}),Object(y.jsx)(A.a,{src:I})]}),""===r&&m.length>0&&Object(y.jsx)(k.a.Item,{label:"\u9009\u62e9\u7fa4\u7ec4",name:"cid",children:Object(y.jsx)(C.a,{options:m,onSelect:function(e){var t=encodeURIComponent(e);u(t)}})}),Object(y.jsx)(O.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]}),Object(y.jsx)(v.a,{to:"/App",children:"\u2190\u5e94\u7528\u9996\u9875"})]})]})},F=n(1),T=n(239),J=n(181),M=n.n(J),L=function(e){var t=w.a.TextArea,n=(C.a.Option,k.a.useForm()),a=Object(N.a)(n,1)[0],i=Object(c.useState)(!1),s=Object(N.a)(i,2),r=s[0],o=s[1],l=Object(c.useState)([]),d=Object(N.a)(l,2),j=d[0],u=d[1],h=Object(c.useState)([]),p=Object(N.a)(h,2),m=p[0],g=p[1],x=Object(c.useState)({}),I=Object(N.a)(x,2),S=I[0],A=I[1],D=Object(c.useState)(""),J=Object(N.a)(D,2),L=J[0],_=J[1],q=Object(c.useState)(""),H=Object(N.a)(q,2),R=H[0],Z=H[1],z=Object(c.useState)([]),B=Object(N.a)(z,2),P=B[0],V=B[1],U=window.location.protocol+"//"+window.location.hostname,E={title:"\u8bbe\u8ba1\u4e2d\u5fc3\u5468\u4f1a",scheduleTime:new Date,address:"\u6e56\u7554 \u5927\u6885\u6c99"},X=function(e){var t=e.title,n=e.scheduleTime,c=e.address,a=""!==L?L:R;b.a.post("/biz/syncSchedule",{title:t,date:n,address:c,users:j,departments:m,cid:a,domain:U}).then((function(e){})).catch((function(e){alert("syncSchedule err, "+JSON.stringify(e))}))};Object(c.useEffect)((function(){var e=window.location.hash,t=!0;if(e){var n=e.indexOf("/"),c=e.substr(n+1),a=c.indexOf("/");if(a>0){var i=c.substr(a+1);_(i),t=!1}}var s=window.location.href;b.a.post("/sign?url="+s).then((function(e){var t;A(e.data),t=e.data,f.config({agentId:t.agentId,corpId:t.corpId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,type:t.type,jsApiList:["biz.contact.complexPicker"]}),f.error((function(e){alert("dd error: "+JSON.stringify(e))}))})).catch((function(e){alert("sign err, "+JSON.stringify(e))})),t&&b.a.get("/getConversationIdMap").then((function(e){var t=e.data,n=[];Object.keys(t).map((function(e,c){var a={label:t[e],value:e};n.push(a)})),V(n)})).catch((function(e){alert("getConversationIdMap err, "+JSON.stringify(e))}))}),[]);var Y=function(e){f.biz.contact.complexPicker({title:"\u9009\u62e9\u4eba\u5458",corpId:S.corpId,multiple:!0,limitTips:"\u8d85\u51fa\u4e86",maxUsers:10,pickedUsers:[],pickedDepartments:[],disabledUsers:[],disabledDepartments:[],requiredUsers:[],requiredDepartments:[],appId:S.agentId,permissionType:"",responseUserOnly:!1,startWithDepartmentId:0,onSuccess:function(e){u(e.users),g(e.departments),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="";if(e.length>0){var c=[];e.map((function(e,t){c.push(e.name)})),n+="\u90e8\u95e8\uff1a"+c.join(",")+"\n"}if(t.length>0){var i=[];t.map((function(e,t){i.push(e.name)})),n+="\u4eba\u5458\uff1a"+i.join(",")}a.setFieldsValue({users:n})}(e.departments,e.users)},onFail:function(e){alert("complexPicker err, "+JSON.stringify(e))}})};return Object(y.jsxs)("div",{className:"content",children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png",className:"headImg"}),"\u9489\u9489\u6a21\u677f"]}),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)("h3",{className:"title",children:"\u9177\u5e94\u7528\u793a\u4f8b\u2014\u540c\u6b65\u65e5\u7a0b\u5230\u7fa4"}),Object(y.jsxs)(k.a,{form:a,onFinish:function(e){var t=Object(F.a)(Object(F.a)({},e),{},{scheduleTime:M()(e.scheduleTime).format("MM\u6708DD\u65e5 HH:mm")});X(t)},initialValues:E,children:[Object(y.jsx)(k.a.Item,{label:"\u65e5\u7a0b\u4e3b\u9898",name:"title",children:Object(y.jsx)(w.a,{placeholder:"\u8bf7\u8f93\u5165\u65e5\u7a0b\u4e3b\u9898"})}),Object(y.jsx)(k.a.Item,{label:"\u65e5\u7a0b\u5730\u70b9",name:"address",children:Object(y.jsx)(w.a,{placeholder:"\u8bf7\u8f93\u5165\u65e5\u7a0b\u5730\u70b9"})}),Object(y.jsx)(k.a.Item,{label:"\u65e5\u7a0b\u4eba\u5458",name:"users",children:Object(y.jsx)(t,{placeholder:"\u8bf7\u9009\u62e9\u65e5\u7a0b\u53c2\u4e0e\u4eba\u5458",readOnly:!0})}),Object(y.jsx)(k.a.Item,{label:"",children:Object(y.jsx)(O.a,{onClick:function(e){return Y()},children:"\u9009\u62e9\u7ec4\u7ec7\u4eba\u5458"})}),""===L&&P.length>0&&Object(y.jsx)(k.a.Item,{label:"\u9009\u62e9\u7fa4\u7ec4",name:"cid",children:Object(y.jsx)(C.a,{options:P,onSelect:function(e){var t=encodeURIComponent(e);Z(t)}})}),Object(y.jsx)(k.a.Item,{label:"\u65e5\u7a0b\u65f6\u95f4",name:"scheduleTime",children:Object(y.jsx)(T.a,{visible:r,onClose:function(){o(!1)},min:new Date,precision:"second",onConfirm:function(e,t){a.setFieldsValue({scheduleTime:e})},children:function(e){return Object(y.jsxs)("div",{style:{textAlign:"left"},children:[Object(y.jsx)(O.a,{onClick:function(){return o(!0)},children:"\u9009\u62e9\u65f6\u95f4"})," ",M()(e).format("YYYY-MM-DD HH:mm:ss")]})}})}),Object(y.jsx)(O.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]}),Object(y.jsx)(v.a,{to:"/App",children:"\u2190\u5e94\u7528\u9996\u9875"})]})]})},_=n(38),q=n(53),H=Object(q.b)(),R=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(y.jsx)(_.c,{history:H,children:Object(y.jsxs)(_.d,{children:[Object(y.jsx)(_.b,{path:"/",exact:!0,render:function(){return Object(y.jsx)(_.a,{to:"/App"})}}),Object(y.jsx)(_.b,{path:"/App",component:I}),Object(y.jsx)(_.b,{path:"/Announcement",component:D}),Object(y.jsx)(_.b,{path:"/Schedule",component:L})]})})}}]),n}(a.a.Component),Z=R;s.a.render(Object(y.jsx)(Z,{}),document.getElementById("root")),S()}},[[670,1,2]]]);
//# sourceMappingURL=main.654b6127.chunk.js.map