{"version":3,"sources":["components/Announcement.js","components/Schedule.js","App.js","reportWebVitals.js","router/index.js","index.js"],"names":["Announcement","props","Select","Option","Form","useForm","form","useState","cid","setCid","cidOption","setCidOption","conArr","setConArr","useEffect","hash","window","location","showGroup","indexOf","str","substr","index","axios","get","then","res","conversationIdMap","data","arr","Object","keys","map","item","i","obj","label","value","push","catch","error","alert","JSON","stringify","className","src","onFinish","console","log","post","initialValues","title","content","Item","name","placeholder","length","options","onSelect","encodeURIComponent","htmlType","type","to","Schedule","TextArea","Input","pickerV","setPickerV","users","setUsers","departments","setDepartments","sign","setSign","initValue","scheduleTime","Date","address","syncSchedule","id","date","href","dd","agentId","corpId","timeStamp","nonceStr","signature","jsApiList","err","complexPicker","e","contact","multiple","limitTips","maxUsers","pickedUsers","pickedDepartments","disabledUsers","disabledDepartments","requiredUsers","requiredDepartments","appId","permissionType","responseUserOnly","startWithDepartmentId","onSuccess","result","deArr","join","usArr","setFieldsValue","pickerFn","onFail","formData","moment","format","readOnly","onClick","visible","onClose","min","precision","onConfirm","val","s","style","textAlign","App","state","domain","authCode","userId","userName","showType","url","height","color","lineHeight","background","backgroundImage","this","login","autoplay","backgroundRepeat","backgroundSize","loginAction","_this","permission","requestAuthCode","code","success","message","info","setTimeout","setState","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","history","createHashHistory","RouterConfig","path","exact","render","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.1cc0431c.chunk.js","sourcesContent":["import react, { useEffect, useState } from \"react\"\nimport {Form, Input, Button, message, Select} from \"antd\"\nimport React from \"react\"\nimport {NavLink} from 'react-router-dom'\nimport '../App.css'\nimport \"antd/dist/antd.min.css\"\nimport axios from \"axios\";\n\nconst Announcement = (props) => {\n    const { Option } = Select;\n    const [form] = Form.useForm()\n    const [cid, setCid] = useState('');\n    const [cidOption, setCidOption] = useState('');\n    const [conArr, setConArr] = useState([]);\n\n    const initValue = {\n        title: \"公告标题\",\n        content: \"公告内容\",\n    }\n\n    const onSubmit = (data) => {\n        data.cid = cid !== '' ? cid : cidOption;\n        console.log(\"======= pushAnnouncement =======\")\n        axios.post( \"/biz/pushAnnouncement\", data).then(res => {\n        }).catch(error => {\n            alert(\"pushAnnouncement err, \" + JSON.stringify(error))\n        })\n    }\n\n    const selectCid = (value) => {\n        let cid = encodeURIComponent(value);\n        setCidOption(cid);\n    }\n\n    useEffect(()=>{\n        const hash = window.location.hash\n        let showGroup = true;\n        if(hash){\n            let indexOf = hash.indexOf(\"/\");\n            let str = hash.substr(indexOf + 1);\n            let index = str.indexOf(\"/\");\n            if(index > 0){\n                let cid = str.substr(index + 1);\n                setCid(cid);\n                showGroup = false;\n            }\n        }\n        if(showGroup){\n            axios.get(\"/getConversationIdMap\").then(res => {\n                const conversationIdMap = res.data;\n                let arr = [];\n                Object.keys(conversationIdMap).map((item, i) => {\n                    let obj = {label: conversationIdMap[item], value:item};\n                    arr.push(obj);\n                })\n                setConArr(arr);\n            }).catch(error => {\n                alert(\"getConversationIdMap err, \" + JSON.stringify(error))\n            })\n        }\n    },[])\n\n\n    return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h3 className=\"title\">酷应用示例—推送公告到群</h3>\n                <Form form={form} onFinish={onSubmit} initialValues={initValue}>\n                    <Form.Item label=\"公告标题\" name=\"title\">\n                        <Input placeholder=\"请输入公告标题\"/>\n                    </Form.Item>\n                    <Form.Item label=\"公告内容\" name=\"content\">\n                        <Input placeholder=\"请输入公告内容\"/>\n                    </Form.Item>\n                    {(cid === '' && conArr.length > 0) && (\n                        <Form.Item label=\"选择群组\" name=\"cid\">\n                        <Select options={conArr} onSelect={selectCid}/>\n                        </Form.Item>\n                    )}\n                    <Button htmlType=\"submit\" type=\"primary\">\n                        提交\n                    </Button>\n                </Form>\n                <NavLink to='/App'>←应用首页</NavLink>\n            </div>\n        </div>\n    )\n}\n\nexport default Announcement\n","import react, { useEffect, useState } from \"react\"\nimport { Form, Input, Button, message, Select} from \"antd\"\nimport React from \"react\"\nimport { DatePicker } from \"antd-mobile\"\nimport moment from \"moment\"\nimport {NavLink} from 'react-router-dom'\nimport '../App.css'\nimport \"antd/dist/antd.min.css\"\nimport axios from \"axios\"\nimport * as dd from \"dingtalk-jsapi\"\n\nconst Schedule = (props) => {\n    const { TextArea } = Input;\n    const { Option } = Select;\n    const [form] = Form.useForm();\n    const [pickerV, setPickerV] = useState(false);\n    const [users, setUsers] = useState([]);\n    const [departments, setDepartments] = useState([]);\n    const [sign, setSign] = useState({});\n    const [cid, setCid] = useState('');\n    const [cidOption, setCidOption] = useState('');\n    const [conArr, setConArr] = useState([]);\n\n    const initValue = {\n        title: \"日程主题\",\n        scheduleTime: new Date(),\n        address: \"日程地点\",\n    }\n\n    const onSubmit = (data) => {\n        const formData ={\n            ...data,\n            scheduleTime: moment(data.scheduleTime).format(\"YYYY-MM-DD HH:mm:ss\")\n        }\n        syncSchedule(formData)\n    }\n\n    const syncSchedule = (data) => {\n        const { title, scheduleTime, address} = data\n        let id = cid !== '' ? cid : cidOption;\n        axios.post(\"/biz/syncSchedule\", {\n            title:title,\n            date:scheduleTime,\n            address:address,\n            users:users,\n            departments:departments,\n            cid:id\n        }).then(res => {\n        }).catch(error => {\n            alert(\"syncSchedule err, \" + JSON.stringify(error))\n        })\n    }\n\n    const pickerFn = (departments = [], users = []) => {\n        let str = \"\";\n        if(departments.length > 0) {\n            let deArr = [];\n            departments.map((item, i) => {\n                deArr.push(item.name);\n            })\n            str += '部门：' + deArr.join(\",\") + '\\n';\n        }\n        if(users.length > 0) {\n            let usArr = [];\n            users.map((item, i) => {\n                usArr.push(item.name);\n            })\n            str += '人员：' + usArr.join(\",\");\n        }\n        form.setFieldsValue({\n            users:str\n        })\n    }\n\n    const ddConfig = (data) => {\n        dd.config({\n            agentId: data.agentId, // 必填，微应用ID\n            corpId: data.corpId,//必填，企业ID\n            timeStamp: data.timeStamp, // 必填，生成签名的时间戳\n            nonceStr: data.nonceStr, // 必填，自定义固定字符串。\n            signature: data.signature, // 必填，签名\n            type: data.type,   //选填。0表示微应用的jsapi,1表示服务窗的jsapi；不填默认为0。该参数从dingtalk.js的0.8.3版本开始支持\n            jsApiList : [\n                'biz.contact.complexPicker',\n            ] // 必填，需要使用的jsapi列表，注意：不要带dd。\n        });\n        dd.error(function (err) {\n            alert('dd error: ' + JSON.stringify(err));\n        })\n    }\n\n    const selectCid = (value) => {\n        let cid = encodeURIComponent(value);\n        setCidOption(cid);\n    }\n\n    useEffect(()=>{\n        let hash = window.location.hash\n        let showGroup = true;\n        if(hash){\n            let indexOf = hash.indexOf(\"/\");\n            let str = hash.substr(indexOf + 1);\n            let index = str.indexOf(\"/\");\n            if(index > 0) {\n                let cid = str.substr(index + 1);\n                setCid(cid);\n                showGroup = false;\n            }\n        };\n        let href = window.location.href;\n        axios.post(\"/sign?url=\" + href\n        ).then(res => {\n            setSign(res.data);\n            ddConfig(res.data);\n        }).catch(error => {\n            alert(\"sign err, \" + JSON.stringify(error))\n        })\n        if(showGroup){\n            axios.get(\"/getConversationIdMap\").then(res => {\n                const conversationIdMap = res.data;\n                let arr = [];\n                Object.keys(conversationIdMap).map((item, i) => {\n                    let obj = {label: conversationIdMap[item], value:item};\n                    arr.push(obj);\n                })\n                setConArr(arr);\n            }).catch(error => {\n                alert(\"getConversationIdMap err, \" + JSON.stringify(error))\n            })\n        }\n    },[])\n\n\n    const complexPicker = (e) => {\n\n        dd.biz.contact.complexPicker({\n            title:\"选择人员\",            //标题\n            corpId:sign.corpId,              //企业的corpId\n            multiple:true,            //是否多选\n            limitTips:\"超出了\",          //超过限定人数返回提示\n            maxUsers:10,            //最大可选人数\n            pickedUsers:[],            //已选用户\n            pickedDepartments:[],          //已选部门\n            disabledUsers:[],            //不可选用户\n            disabledDepartments:[],        //不可选部门\n            requiredUsers:[],            //必选用户（不可取消选中状态）\n            requiredDepartments:[],        //必选部门（不可取消选中状态）\n            appId:sign.agentId,              //微应用Id，企业内部应用查看AgentId\n            permissionType:\"\",          //可添加权限校验，选人权限，目前只有GLOBAL这个参数\n            responseUserOnly:false,        //返回人，或者返回人和部门\n            startWithDepartmentId:0 ,   //仅支持0和-1\n            onSuccess: function(result) {\n                setUsers(result.users);\n                setDepartments(result.departments);\n                pickerFn(result.departments, result.users);\n            },\n            onFail : function(err) {\n                alert(\"complexPicker err, \" + JSON.stringify(err))\n            }\n        });\n    }\n\n    return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h3 className=\"title\">酷应用示例—同步日程到群</h3>\n                <Form form={form} onFinish={onSubmit} initialValues={initValue}>\n                    <Form.Item label=\"日程主题\" name=\"title\">\n                        <Input placeholder=\"请输入日程主题\" />\n                    </Form.Item>\n                    <Form.Item label=\"日程地点\" name=\"address\">\n                        <Input placeholder=\"请输入日程地点\" />\n                    </Form.Item>\n                    <Form.Item label=\"日程人员\" name=\"users\">\n                        <TextArea placeholder=\"请选择日程参与人员\" readOnly={true} />\n                    </Form.Item>\n                    <Form.Item label=''>\n                        <Button onClick={(e) => complexPicker(e)}>\n                            选择组织人员\n                        </Button>\n                    </Form.Item>\n                    {(cid === '' && conArr.length > 0) && (\n                        <Form.Item label=\"选择群组\" name=\"cid\">\n                            <Select options={conArr} onSelect={selectCid}/>\n                        </Form.Item>\n                    )}\n                    <Form.Item label=\"日程时间\" name=\"scheduleTime\">\n                        <DatePicker\n                            visible={pickerV}\n                            onClose={() => {\n                                setPickerV(false)\n                            }}\n                            min={new Date()}\n                            precision=\"second\"\n                            onConfirm={(val, s) => {\n                                form.setFieldsValue({\n                                    scheduleTime: val,\n                                })\n                            }}\n                        >\n                        {(value) => (\n                            <div style={{ textAlign: \"left\" }}>\n                                <Button onClick={() => setPickerV(true)} >\n                                    选择时间\n                                </Button>{\" \"}\n                                {moment(value).format(\"YYYY-MM-DD HH:mm:ss\")}\n                            </div>\n                        )}\n                        </DatePicker>\n                    </Form.Item>\n                    <Button htmlType=\"submit\" type=\"primary\">\n                        提交\n                    </Button>\n                </Form>\n                <NavLink to='/App'>←应用首页</NavLink>\n            </div>\n        </div>\n    )\n}\n\nexport default Schedule\n","import axios from 'axios'\nimport React from 'react'\nimport './App.css'\nimport \"antd/dist/antd.min.css\"\nimport { Button, message, Carousel} from \"antd\"\nimport * as dd from \"dingtalk-jsapi\"\nimport Announcement from \"./components/Announcement\"\nimport Schedule from \"./components/Schedule\"\nimport {NavLink} from 'react-router-dom'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            //内网穿透工具介绍:\n            // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n            domain: \"\",\n            corpId: '',\n            authCode: '',\n            userId: '',\n            userName: '',\n            showType: 0\n        }\n    }\n\n    constructorContentStyle(url) {\n        const contentStyle = {\n            height: '160px',\n            color: '#fff',\n            lineHeight: '160px',\n            textAlign: 'center',\n            background: '#364d79',\n            backgroundImage: 'url(' + url + ')'\n        }\n        return contentStyle;\n    }\n\n    render() {\n        if (this.state.userId === '') {\n            // 免登操作\n            this.login();\n        }\n        return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h2>酷应用配置</h2>\n                <p>体验此应用需要做如下配置，参考文档：https://open.dingtalk.com/document/org/group-application</p>\n                <Carousel autoplay={true}>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i2/O1CN01MG0GBf1fbxJHpo96o_!!6000000004026-2-tps-988-593.png)'\n                        }}>第一步：配置机器人</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)'\n                        }}>第二步：开启配置应用扩展</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i3/O1CN01Lz3wjC1aFRlgZo0fW_!!6000000003300-2-tps-1005-536.png)'\n                        }}>第三步：配置群入口</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)'\n                        }}>第四步：点击按钮发布到群</p>\n                    </div>\n                </Carousel>\n                <br/><br/>\n                <div>\n                    <h2>酷应用示例</h2>\n                    <p>\n                        <Button type=\"primary\">\n                            <NavLink to='/Announcement'>推送公告到群</NavLink>\n                        </Button>\n                    </p>\n                    <p>\n                        <Button type=\"primary\">\n                            <NavLink to='/Schedule'>同步日程到群</NavLink>\n                        </Button>\n                    </p>\n                </div>\n            </div>\n        </div>\n        );\n    }\n\n    //登录-获取corpId\n    login() {\n        axios.get(this.state.domain + \"/getCorpId\")\n            .then(res => {\n                if (res.data) {\n                    this.loginAction(res.data);\n                }\n            }).catch(error => {\n            alert(\"corpId err, \" + JSON.stringify(error))\n        })\n    }\n\n    //登录操作\n    loginAction(corpId) {\n        // alert(\"corpId: \" +  corpId);\n        let _this = this;\n        dd.runtime.permission.requestAuthCode({\n            corpId: corpId,//企业 corpId\n            onSuccess: function (res) {\n                // 调用成功时回调\n                _this.state.authCode = res.code\n                axios.get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode\n                ).then(res => {\n                    if (res && res.data.success) {\n                        let userId = res.data.data.userId;\n                        let userName = res.data.data.userName;\n                        message.info('登录成功，你好' + userName);\n                        setTimeout(function () {\n                            _this.setState({\n                                userId: userId,\n                                userName: userName\n                            })\n                        }, 0)\n                    } else {\n                        alert(\"login failed --->\" + JSON.stringify(res));\n                    }\n                }).catch(error => {\n                    alert(\"httpRequest failed --->\" + JSON.stringify(error))\n                })\n            },\n            onFail: function (err) {\n                // 调用失败时回调\n                alert(\"requestAuthCode failed --->\" + JSON.stringify(err))\n            }\n        });\n    }\n\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Announcement from '../components/Announcement';\nimport Schedule from '../components/Schedule';\nimport App from '../App';\nimport React from 'react';\nimport {Router,Route,Switch,Redirect} from 'react-router-dom';\nimport { createHashHistory } from \"history\";\nconst history = createHashHistory();\n\nclass RouterConfig extends React.Component{\n    render(){\n        return(\n            <Router history={history}>\n                <Switch>\n                    <Route path='/' exact render={()=>(\n                        <Redirect to='/App'/>\n                    )}/>\n                    <Route path='/App' component={App}/>\n                    <Route path='/Announcement' component={Announcement}/>\n                    <Route path='/Schedule' component={Schedule}/>\n                </Switch>\n            </Router>\n        )\n    }\n}\nexport default RouterConfig;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport RouterConfig from './router/index.js';\n\nReactDOM.render(\n    <RouterConfig/>, document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}