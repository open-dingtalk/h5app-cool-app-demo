{"version":3,"sources":["components/Announcement.js","components/Schedule.js","App.js","reportWebVitals.js","router/index.js","index.js"],"names":["Announcement","props","Option","Select","Form","useForm","form","useState","cid","setCid","cidOption","setCidOption","conArr","setConArr","img","setImg","domain","window","location","protocol","hostname","initValue","title","content","imgArr","useEffect","hash","showGroup","indexOf","str","substr","index","axios","get","then","res","conversationIdMap","data","arr","Object","keys","map","item","i","obj","label","value","push","catch","error","alert","JSON","stringify","className","src","onFinish","console","log","post","initialValues","Item","name","placeholder","defaultValue","onChange","parseInt","length","options","onSelect","encodeURIComponent","htmlType","type","to","Schedule","TextArea","Input","pickerV","setPickerV","users","setUsers","departments","setDepartments","sign","setSign","scheduleTime","Date","address","syncSchedule","id","date","href","dd","agentId","corpId","timeStamp","nonceStr","signature","jsApiList","err","complexPicker","e","contact","multiple","limitTips","maxUsers","pickedUsers","pickedDepartments","disabledUsers","disabledDepartments","requiredUsers","requiredDepartments","appId","permissionType","responseUserOnly","startWithDepartmentId","onSuccess","result","deArr","join","usArr","setFieldsValue","pickerFn","onFail","formData","moment","format","readOnly","onClick","visible","onClose","min","precision","onConfirm","val","s","style","textAlign","App","state","authCode","userId","userName","showType","url","height","color","lineHeight","background","backgroundImage","setInterval","a","setState","this","getLog","login","autoplay","backgroundRepeat","backgroundSize","loginAction","_this","permission","requestAuthCode","code","success","message","info","setTimeout","React","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","history","createHashHistory","RouterConfig","path","exact","render","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.97aaab1e.chunk.js","sourcesContent":["import react, { useEffect, useState } from \"react\"\nimport {Form, Input, Button, message, Select, Image} from \"antd\"\nimport React from \"react\"\nimport {NavLink} from 'react-router-dom'\nimport '../App.css'\nimport \"antd/dist/antd.min.css\"\nimport axios from \"axios\";\n\nconst Announcement = (props) => {\n    const { Option } = Select;\n    const [form] = Form.useForm()\n    const [cid, setCid] = useState('');\n    const [cidOption, setCidOption] = useState('');\n    const [conArr, setConArr] = useState([]);\n    const [img, setImg] = useState('https://gw.alicdn.com/imgextra/i2/O1CN015ODkeA1wO4lFrPogt_!!6000000006297-2-tps-572-844.png');\n    const domain = window.location.protocol + \"//\" + window.location.hostname;\n    const initValue = {\n        title: \"公告\",\n        content: \"大家按照这个格式填写下，每周我会做一个统计和公布哈，和大家同步下我们的进展\",\n        imgArr: [\n            \"https://gw.alicdn.com/imgextra/i1/O1CN01RX9taL1bnAWsG3tWy_!!6000000003509-2-tps-572-844.png\",\n            \"https://gw.alicdn.com/imgextra/i2/O1CN015ODkeA1wO4lFrPogt_!!6000000006297-2-tps-572-844.png\",\n            \"https://gw.alicdn.com/imgextra/i2/O1CN01Eq7BfJ1D4hIJ2L0RS_!!6000000000163-2-tps-572-844.png\",\n            \"https://gw.alicdn.com/imgextra/i1/O1CN010iPftK1s0wI0kMHPI_!!6000000005705-2-tps-572-844.png\"\n        ]\n    }\n\n    const onSubmit = (data) => {\n        data.cid = cid !== '' ? cid : cidOption;\n        data.img = img;\n        data.domain = domain;\n        console.log(\"======= pushAnnouncement =======\")\n        axios.post( \"/biz/pushAnnouncement\", data).then(res => {\n        }).catch(error => {\n            alert(\"pushAnnouncement err, \" + JSON.stringify(error))\n        })\n    }\n\n    const selectCid = (value) => {\n        let cid = encodeURIComponent(value);\n        setCidOption(cid);\n    }\n\n    const selectImg = (value) => {\n        const i = parseInt(value)\n        const img = initValue.imgArr[i];\n        setImg(img);\n    }\n\n    useEffect(()=>{\n        const hash = window.location.hash\n        let showGroup = true;\n        if(hash){\n            let indexOf = hash.indexOf(\"/\");\n            let str = hash.substr(indexOf + 1);\n            let index = str.indexOf(\"/\");\n            if(index > 0){\n                let cid = str.substr(index + 1);\n                setCid(cid);\n                showGroup = false;\n            }\n        }\n        if(showGroup){\n            axios.get(\"/getConversationIdMap\").then(res => {\n                const conversationIdMap = res.data;\n                let arr = [];\n                Object.keys(conversationIdMap).map((item, i) => {\n                    let obj = {label: conversationIdMap[item], value:item};\n                    arr.push(obj);\n                })\n                setConArr(arr);\n            }).catch(error => {\n                alert(\"getConversationIdMap err, \" + JSON.stringify(error))\n            })\n        }\n    },[])\n\n\n    return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h3 className=\"title\">酷应用示例—推送公告到群</h3>\n                <Form form={form} onFinish={onSubmit} initialValues={initValue}>\n                    <Form.Item label=\"公告标题\" name=\"title\">\n                        <Input placeholder=\"请输入公告标题\"/>\n                    </Form.Item>\n                    <Form.Item label=\"公告内容\" name=\"content\">\n                        <Input placeholder=\"请输入公告内容\"/>\n                    </Form.Item>\n                    <Form.Item label=\"公告配图\" name=\"img\">\n                        <Select defaultValue=\"1\" onChange={selectImg}>\n                            <Option value=\"0\">图1</Option>\n                            <Option value=\"1\">图2</Option>\n                            <Option value=\"2\">图3</Option>\n                            <Option value=\"3\">图4</Option>\n                        </Select>\n                        <br/>\n                        <Image src={img} />\n                    </Form.Item>\n\n                    {(cid === '' && conArr.length > 0) && (\n                        <Form.Item label=\"选择群组\" name=\"cid\">\n                        <Select options={conArr} onSelect={selectCid}/>\n                        </Form.Item>\n                    )}\n                    <Button htmlType=\"submit\" type=\"primary\">\n                        提交\n                    </Button>\n                </Form>\n                <NavLink to='/App'>←应用首页</NavLink>\n            </div>\n        </div>\n    )\n}\n\nexport default Announcement\n","import react, { useEffect, useState } from \"react\"\nimport { Form, Input, Button, message, Select} from \"antd\"\nimport React from \"react\"\nimport { DatePicker } from \"antd-mobile\"\nimport moment from \"moment\"\nimport {NavLink} from 'react-router-dom'\nimport '../App.css'\nimport \"antd/dist/antd.min.css\"\nimport axios from \"axios\"\nimport * as dd from \"dingtalk-jsapi\"\n\nconst Schedule = (props) => {\n    const { TextArea } = Input;\n    const { Option } = Select;\n    const [form] = Form.useForm();\n    const [pickerV, setPickerV] = useState(false);\n    const [users, setUsers] = useState([]);\n    const [departments, setDepartments] = useState([]);\n    const [sign, setSign] = useState({});\n    const [cid, setCid] = useState('');\n    const [cidOption, setCidOption] = useState('');\n    const [conArr, setConArr] = useState([]);\n    const domain = window.location.protocol + \"//\" + window.location.hostname;\n    const initValue = {\n        title: \"日程主题\",\n        scheduleTime: new Date(),\n        address: \"日程地点\",\n    }\n\n    const onSubmit = (data) => {\n        const formData ={\n            ...data,\n            scheduleTime: moment(data.scheduleTime).format(\"YYYY-MM-DD HH:mm:ss\")\n        }\n        syncSchedule(formData)\n    }\n\n    const syncSchedule = (data) => {\n        const { title, scheduleTime, address} = data\n        let id = cid !== '' ? cid : cidOption;\n        axios.post(\"/biz/syncSchedule\", {\n            title:title,\n            date:scheduleTime,\n            address:address,\n            users:users,\n            departments:departments,\n            cid:id,\n            domain:domain\n        }).then(res => {\n        }).catch(error => {\n            alert(\"syncSchedule err, \" + JSON.stringify(error))\n        })\n    }\n\n    const pickerFn = (departments = [], users = []) => {\n        let str = \"\";\n        if(departments.length > 0) {\n            let deArr = [];\n            departments.map((item, i) => {\n                deArr.push(item.name);\n            })\n            str += '部门：' + deArr.join(\",\") + '\\n';\n        }\n        if(users.length > 0) {\n            let usArr = [];\n            users.map((item, i) => {\n                usArr.push(item.name);\n            })\n            str += '人员：' + usArr.join(\",\");\n        }\n        form.setFieldsValue({\n            users:str\n        })\n    }\n\n    const ddConfig = (data) => {\n        dd.config({\n            agentId: data.agentId, // 必填，微应用ID\n            corpId: data.corpId,//必填，企业ID\n            timeStamp: data.timeStamp, // 必填，生成签名的时间戳\n            nonceStr: data.nonceStr, // 必填，自定义固定字符串。\n            signature: data.signature, // 必填，签名\n            type: data.type,   //选填。0表示微应用的jsapi,1表示服务窗的jsapi；不填默认为0。该参数从dingtalk.js的0.8.3版本开始支持\n            jsApiList : [\n                'biz.contact.complexPicker',\n            ] // 必填，需要使用的jsapi列表，注意：不要带dd。\n        });\n        dd.error(function (err) {\n            alert('dd error: ' + JSON.stringify(err));\n        })\n    }\n\n    const selectCid = (value) => {\n        let cid = encodeURIComponent(value);\n        setCidOption(cid);\n    }\n\n    useEffect(()=>{\n        let hash = window.location.hash\n        let showGroup = true;\n        if(hash){\n            let indexOf = hash.indexOf(\"/\");\n            let str = hash.substr(indexOf + 1);\n            let index = str.indexOf(\"/\");\n            if(index > 0) {\n                let cid = str.substr(index + 1);\n                setCid(cid);\n                showGroup = false;\n            }\n        };\n        let href = window.location.href;\n        axios.post(\"/sign?url=\" + href\n        ).then(res => {\n            setSign(res.data);\n            ddConfig(res.data);\n        }).catch(error => {\n            alert(\"sign err, \" + JSON.stringify(error))\n        })\n        if(showGroup){\n            axios.get(\"/getConversationIdMap\").then(res => {\n                const conversationIdMap = res.data;\n                let arr = [];\n                Object.keys(conversationIdMap).map((item, i) => {\n                    let obj = {label: conversationIdMap[item], value:item};\n                    arr.push(obj);\n                })\n                setConArr(arr);\n            }).catch(error => {\n                alert(\"getConversationIdMap err, \" + JSON.stringify(error))\n            })\n        }\n    },[])\n\n\n    const complexPicker = (e) => {\n\n        dd.biz.contact.complexPicker({\n            title:\"选择人员\",            //标题\n            corpId:sign.corpId,              //企业的corpId\n            multiple:true,            //是否多选\n            limitTips:\"超出了\",          //超过限定人数返回提示\n            maxUsers:10,            //最大可选人数\n            pickedUsers:[],            //已选用户\n            pickedDepartments:[],          //已选部门\n            disabledUsers:[],            //不可选用户\n            disabledDepartments:[],        //不可选部门\n            requiredUsers:[],            //必选用户（不可取消选中状态）\n            requiredDepartments:[],        //必选部门（不可取消选中状态）\n            appId:sign.agentId,              //微应用Id，企业内部应用查看AgentId\n            permissionType:\"\",          //可添加权限校验，选人权限，目前只有GLOBAL这个参数\n            responseUserOnly:false,        //返回人，或者返回人和部门\n            startWithDepartmentId:0 ,   //仅支持0和-1\n            onSuccess: function(result) {\n                setUsers(result.users);\n                setDepartments(result.departments);\n                pickerFn(result.departments, result.users);\n            },\n            onFail : function(err) {\n                alert(\"complexPicker err, \" + JSON.stringify(err))\n            }\n        });\n    }\n\n    return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h3 className=\"title\">酷应用示例—同步日程到群</h3>\n                <Form form={form} onFinish={onSubmit} initialValues={initValue}>\n                    <Form.Item label=\"日程主题\" name=\"title\">\n                        <Input placeholder=\"请输入日程主题\" />\n                    </Form.Item>\n                    <Form.Item label=\"日程地点\" name=\"address\">\n                        <Input placeholder=\"请输入日程地点\" />\n                    </Form.Item>\n                    <Form.Item label=\"日程人员\" name=\"users\">\n                        <TextArea placeholder=\"请选择日程参与人员\" readOnly={true} />\n                    </Form.Item>\n                    <Form.Item label=''>\n                        <Button onClick={(e) => complexPicker(e)}>\n                            选择组织人员\n                        </Button>\n                    </Form.Item>\n                    {(cid === '' && conArr.length > 0) && (\n                        <Form.Item label=\"选择群组\" name=\"cid\">\n                            <Select options={conArr} onSelect={selectCid}/>\n                        </Form.Item>\n                    )}\n                    <Form.Item label=\"日程时间\" name=\"scheduleTime\">\n                        <DatePicker\n                            visible={pickerV}\n                            onClose={() => {\n                                setPickerV(false)\n                            }}\n                            min={new Date()}\n                            precision=\"second\"\n                            onConfirm={(val, s) => {\n                                form.setFieldsValue({\n                                    scheduleTime: val,\n                                })\n                            }}\n                        >\n                        {(value) => (\n                            <div style={{ textAlign: \"left\" }}>\n                                <Button onClick={() => setPickerV(true)} >\n                                    选择时间\n                                </Button>{\" \"}\n                                {moment(value).format(\"YYYY-MM-DD HH:mm:ss\")}\n                            </div>\n                        )}\n                        </DatePicker>\n                    </Form.Item>\n                    <Button htmlType=\"submit\" type=\"primary\">\n                        提交\n                    </Button>\n                </Form>\n                <NavLink to='/App'>←应用首页</NavLink>\n            </div>\n        </div>\n    )\n}\n\nexport default Schedule\n","import axios from 'axios'\nimport React from 'react'\nimport './App.css'\nimport \"antd/dist/antd.min.css\"\nimport { Button, message, Carousel, Timeline} from \"antd\"\nimport * as dd from \"dingtalk-jsapi\"\nimport Announcement from \"./components/Announcement\"\nimport Schedule from \"./components/Schedule\"\nimport {NavLink} from 'react-router-dom'\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            //内网穿透工具介绍:\n            // https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration?pnamespace=app\n            domain: \"\",\n            corpId: '',\n            authCode: '',\n            userId: '',\n            userName: '',\n            showType: 0,\n            log:[]\n\n        }\n    }\n\n    constructorContentStyle(url) {\n        const contentStyle = {\n            height: '160px',\n            color: '#fff',\n            lineHeight: '160px',\n            textAlign: 'center',\n            background: '#364d79',\n            backgroundImage: 'url(' + url + ')'\n        }\n        return contentStyle;\n    }\n\n    getLog() {\n        setInterval(async ()=>{\n            axios.get(this.state.domain + \"/getLog\")\n                .then(res => {\n                    if (res.data) {\n                        const log = res.data;\n                        let arr = [];\n                        Object.keys(log).map((item, i) => {\n                            let s = item + \"，\" + log[item];\n                            arr.push(s);\n                        })\n                        this.setState({\n                            log: arr\n                        });\n                    }\n                }).catch(error => {\n                alert(\"getLog err, \" + JSON.stringify(error))\n            })\n        },3000)\n    }\n\n    render() {\n        this.getLog();\n        if (this.state.userId === '') {\n            // 免登操作\n            this.login();\n        }\n        return (\n        <div className=\"content\">\n            <div className=\"header\">\n                <img\n                    src=\"https://img.alicdn.com/imgextra/i3/O1CN01Mpftes1gwqxuL0ZQE_!!6000000004207-2-tps-240-240.png\"\n                    className=\"headImg\"\n                />\n                钉钉模板\n            </div>\n            <div className=\"App\">\n                <h2>酷应用配置</h2>\n                <p>体验此应用需要做如下配置，参考文档：https://open.dingtalk.com/document/org/group-application</p>\n                <Carousel autoplay={true}>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i2/O1CN01MG0GBf1fbxJHpo96o_!!6000000004026-2-tps-988-593.png)'\n                        }}>第一步：配置机器人</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)'\n                        }}>第二步：开启配置应用扩展</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i3/O1CN01Lz3wjC1aFRlgZo0fW_!!6000000003300-2-tps-1005-536.png)'\n                        }}>第三步：配置群入口</p>\n                    </div>\n                    <div>\n                        <p style={{\n                            height: '160px',\n                            color: 'red',\n                            lineHeight: '160px',\n                            textAlign: 'center',\n                            background: '#364d79',\n                            backgroundRepeat:'no-repeat',\n                            backgroundSize:'100% 100%',\n                            backgroundImage: 'url(https://img.alicdn.com/imgextra/i4/O1CN01DXlDeL1ZBx81BluOv_!!6000000003157-2-tps-1013-610.png)'\n                        }}>第四步：点击按钮发布到群</p>\n                    </div>\n                </Carousel>\n                <br/><br/>\n                <div>\n                    <h2>酷应用示例</h2>\n                    <p>\n                        <Button type=\"primary\">\n                            <NavLink to='/Announcement'>推送公告到群</NavLink>\n                        </Button>\n                    </p>\n                    <p>\n                        <Button type=\"primary\">\n                            <NavLink to='/Schedule'>同步日程到群</NavLink>\n                        </Button>\n                    </p>\n                </div>\n                <br/><br/>\n                <div>\n                    <h2>酷应用动作</h2>\n                    <p>\n                        {this.state.log.length > 0 && (\n                            <div>\n                                <Timeline>\n                                    {this.state.log.map((item, i) => (\n                                        <Timeline.Item key={i}>{item}</Timeline.Item>\n                                    ))}\n                                </Timeline>\n                            </div>\n                        )}\n                    </p>\n                </div>\n            </div>\n        </div>\n        );\n    }\n\n    //登录-获取corpId\n    login() {\n        axios.get(this.state.domain + \"/getCorpId\")\n            .then(res => {\n                if (res.data) {\n                    this.loginAction(res.data);\n                }\n            }).catch(error => {\n            alert(\"corpId err, \" + JSON.stringify(error))\n        })\n    }\n\n    //登录操作\n    loginAction(corpId) {\n        // alert(\"corpId: \" +  corpId);\n        let _this = this;\n        dd.runtime.permission.requestAuthCode({\n            corpId: corpId,//企业 corpId\n            onSuccess: function (res) {\n                // 调用成功时回调\n                _this.state.authCode = res.code\n                axios.get(_this.state.domain + \"/login?authCode=\" + _this.state.authCode\n                ).then(res => {\n                    if (res && res.data.success) {\n                        let userId = res.data.data.userId;\n                        let userName = res.data.data.userName;\n                        message.info('登录成功，你好' + userName);\n                        setTimeout(function () {\n                            _this.setState({\n                                userId: userId,\n                                userName: userName\n                            })\n                        }, 0)\n                    } else {\n                        alert(\"login failed --->\" + JSON.stringify(res));\n                    }\n                }).catch(error => {\n                    alert(\"httpRequest failed --->\" + JSON.stringify(error))\n                })\n            },\n            onFail: function (err) {\n                // 调用失败时回调\n                alert(\"requestAuthCode failed --->\" + JSON.stringify(err))\n            }\n        });\n    }\n\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import Announcement from '../components/Announcement';\nimport Schedule from '../components/Schedule';\nimport App from '../App';\nimport React from 'react';\nimport {Router,Route,Switch,Redirect} from 'react-router-dom';\nimport { createHashHistory } from \"history\";\nconst history = createHashHistory();\n\nclass RouterConfig extends React.Component{\n    render(){\n        return(\n            <Router history={history}>\n                <Switch>\n                    <Route path='/' exact render={()=>(\n                        <Redirect to='/App'/>\n                    )}/>\n                    <Route path='/App' component={App}/>\n                    <Route path='/Announcement' component={Announcement}/>\n                    <Route path='/Schedule' component={Schedule}/>\n                </Switch>\n            </Router>\n        )\n    }\n}\nexport default RouterConfig;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport RouterConfig from './router/index.js';\n\nReactDOM.render(\n    <RouterConfig/>, document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}